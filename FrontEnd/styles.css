:root{
  --bg:#f5f7fa; --card:#ffffff; --border:#e2e6ee;
  --fg:#20242b; --fg2:#5e6270; --brand:#4670ff;
  --radius:12px; --shadow:0 4px 14px rgba(0,0,0,.08);
  --font:'Inter',sans-serif;
}

/* dark mode toggles everything with .dark on body */
body.dark{
  --bg:#13171f; --card:#1e2430; --border:#2a3140;
  --fg:#edf0f5; --fg2:#8c92a3; --brand:#6c8dff;
  --shadow:none;
}

*,*:before,*:after{box-sizing:border-box}
body{margin:0;font-family:var(--font);background:var(--bg);color:var(--fg);}

.header{display:flex;justify-content:space-between;align-items:center;
  padding:10px 24px;background:var(--card);box-shadow:var(--shadow);position:sticky;top:0;z-index:100;}

.logo{display:flex;align-items:center;gap:8px;font-weight:600;font-size:18px;}
.icon{mask-size:contain;background:currentColor;display:inline-block;width:1em;height:1em;}
.icon.brain{mask:url(assets/icons.svg#brain) no-repeat}
.icon.sun{mask:url(assets/icons.svg#sun) no-repeat}
.icon.refresh{mask:url(assets/icons.svg#refresh) no-repeat}
.icon.download{mask:url(assets/icons.svg#download) no-repeat}
/* ...add remaining icons */

.icon-btn{background:none;border:none;padding:8px;color:var(--fg2);cursor:pointer;border-radius:50%;}
.icon-btn:hover{background:rgba(0,0,0,.06)}

.chip{border:1px solid var(--border);background:var(--card);padding:6px 14px;
  border-radius:999px;display:inline-flex;align-items:center;gap:6px;font-size:14px;cursor:pointer;transition:.2s;}
.chip:hover{box-shadow:var(--shadow)}
.chip.primary{background:var(--brand);color:#fff;border-color:transparent}
.chip.success{background:#37b679;color:#fff;border-color:transparent}

.workspace{display:grid;grid-template-columns:280px 1fr 320px;gap:18px;
  padding:18px;max-width:1600px;margin:0 auto;}
.sidebar,.props{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;height:calc(100vh - 140px);overflow:auto}

.card{margin-bottom:24px;}
.card h2{font-size:17px;margin:0 0 16px;display:flex;align-items:center;gap:6px;}
.tile{padding:8px 12px;background:var(--bg);border:1px dashed var(--border);border-radius:8px;
  cursor:grab;user-select:none;text-align:center;font-size:14px;}
.tile:active{cursor:grabbing}
.palette-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;}

.canvas{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:24px;overflow:auto}
.canvas-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;}
.flow{min-height:480px;position:relative}
.empty{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--fg2);}
.node{background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:12px 16px;display:flex;flex-direction:column;gap:4px;min-width:160px;cursor:pointer;transition:.2s;}
.node:hover{box-shadow:var(--shadow);border-color:var(--brand)}
/* connection lines drawn with pseudo element or SVG */

.bottom-bar{position:sticky;bottom:0;background:var(--card);padding:10px 24px;
  box-shadow:0 -2px 8px rgba(0,0,0,.05);display:flex;justify-content:flex-end;}
.buttons{display:flex;gap:10px;}

.drop-zone{display:flex;align-items:center;justify-content:center;height:140px;background:var(--bg);
  border:2px dashed var(--border);border-radius:var(--radius);cursor:pointer;transition:.2s;}
.drop-zone.dragover{background:rgba(70,112,255,.06);border-color:var(--brand)}

.preview{margin-top:12px;display:grid;gap:8px;}
.preview img{max-width:100%;border-radius:var(--radius);}

.dim-row{display:flex;gap:8px;margin-top:8px;}
.dim-row label{display:flex;flex-direction:column;font-size:12px;gap:4px;}
.dim-row input{padding:6px;border:1px solid var(--border);border-radius:6px;width:70px;text-align:center;}

dialog{border:none;border-radius:var(--radius);max-width:740px;width:90%;padding:0;box-shadow:var(--shadow);}
dialog::backdrop{background:rgba(0,0,0,.45)}
dialog header{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;border-bottom:1px solid var(--border);background:var(--card);}
.tabs{display:flex;border-bottom:1px solid var(--border);}
.tab{flex:1;padding:10px;border:none;background:none;cursor:pointer;font-weight:500;}
.tab.active{color:var(--brand);border-bottom:2px solid var(--brand);}
pre{margin:0;padding:20px;background:var(--bg);max-height:44vh;overflow:auto;font-size:13px;}
.modal-actions{display:flex;justify-content:flex-end;gap:10px;padding:14px 20px;}
